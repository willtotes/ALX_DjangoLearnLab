{% extends "blog/base.html" %}

{% block title %}Home - Django Blog{% endblock %}

{% block content %}
<div class="hero-section">
    <h1>Welcome to Django Blog</h1>
    <p>Share your thoughts and ideas with the world</p>
    {% if not user.is_authenticated %}
    <div class="hero-buttons">
        <a href="{% url 'register' %}" class="btn btn-primary">Get Started</a>
        <a href="{% url 'login' %}" class="btn btn-secondary">Login</a>
    </div>
    {% endif %}
</div>

<div class="search-section">
    <div class="search-container">
        <form method="GET" action="{% url 'search' %}" class="search-form">
            <div class="input-group">
                <input type="text" name="q" class="form-control search-input" 
                       placeholder="Search posts by title, content, or tags..." 
                       value="{{ request.GET.q }}">
                <button type="submit" class="btn btn-primary search-btn">
                    <i class="search-icon">üîç</i> Search
                </button>
            </div>
        </form>
        <div class="search-actions">
            <a href="{% url 'popular-tags' %}" class="btn btn-outline">Browse Popular Tags</a>
        </div>
    </div>
</div>

<div class="recent-posts">
    <h2>Recent Posts</h2>
    {% if posts %}
        <div class="posts-grid">
            {% for post in posts %}
            <article class="post-card">
                <h3><a href="{% url 'post-detail' post.pk %}">{{ post.title }}</a></h3>
                <p class="post-meta">
                    By {{ post.author.username }} on {{ post.published_date|date:"F d, Y" }}
                </p>
                
                {% if post.tags.all %}
                <div class="post-tags-small">
                    {% for tag in post.tags.all %}
                    <a href="{% url 'tagged-posts' tag.name %}" class="tag tag-small">{{ tag.name }}</a>
                    {% endfor %}
                </div>
                {% endif %}
                
                <p class="post-excerpt">
                    {{ post.content|truncatewords:30 }}
                </p>
                <div class="post-card-actions">
                    <a href="{% url 'post-detail' post.pk %}" class="read-more">Read more</a>
                    <span class="comment-count-small">{{ post.comment_count }} comment{{ post.comment_count|pluralize }}</span>
                </div>
            </article>
            {% endfor %}
        </div>
        <div class="view-all">
            <a href="{% url 'post-list' %}" class="btn btn-outline">View All Posts</a>
        </div>
    {% else %}
        <div class="no-posts">
            <p>No posts yet. {% if user.is_authenticated %}<a href="{% url 'post-create' %}">Create the first post!</a>{% else %}<a href="{% url 'register' %}">Join now to start writing</a>{% endif %}</p>
        </div>
    {% endif %}
</div>
{% endblock %}